- name: Get dependencies
  become: yes
  apt:
    name: libfuse2
- name: Download PrusaSlicer
  get_url:
    url: "https://github.com/prusa3d/PrusaSlicer/releases/download/version_2.4.2/PrusaSlicer-2.4.2+linux-x64-GTK3-202204251120.AppImage"
    checksum: "sha256:b36f49a577ab88d568d8165a94ac62e9eb6d9b4dcc46516a82e1a6131fdcea6e"
    dest: "{{ home }}/.local/bin/prusa-slicer"
    mode: "700"
- name: Install realthunder FreeCAD
  become: yes
  snap:
    name: freecad-realthunder
    channel: "latest/edge"
- name: Install desktop entries
  shell: "desktop-file-install --dir={{ home }}/.local/share/applications roles/3d_printing/files/{{ item }} && update-desktop-database {{ home }}/.local/share/applications"
  args:
    creates: "{{ home }}/.local/share/applications/{{ item }}"
  loop:
    - PrusaSlicer.desktop
- name: Create icons directory
  file:
    state: directory
    dest: "{{ home }}/.local/share/icons"
- name: Copy icons
  copy:
    src: "{{ item }}"
    dest: "{{ home }}/.local/share/icons/{{ item }}"
  loop:
    - prusa-slicer.png
